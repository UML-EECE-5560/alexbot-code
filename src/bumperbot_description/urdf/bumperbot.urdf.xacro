<?xml version="1.0"?>

<robot name="bumperbot" xmlns:xacro="http://ros.org/wiki/xacro">

    <xacro:property name = "base_length" value = "0.280"/>
    <xacro:property name = "base_width" value = "0.180"/>
    <xacro:property name = "base_height" value = "0.115"/>
    <xacro:property name = "wheel_radius" value = "0.044"/>
    <xacro:property name = "wheel_length" value = "0.035"/>
    <xacro:property name = "laser_radius" value = "0.0275"/>
    <xacro:property name = "laser_length" value = "0.0425"/>

    <!-- Load Simulated or Real Hardware Interfaces -->
    <xacro:arg name="is_sim" default="false"/>

    <!-- Include ros2_control Plugins -->
    <xacro:include filename="$(find bumperbot_description)/urdf/bumperbot_ros2_control.xacro" />

    <link name="base_footprint"/>
  
    <link name = "base_link">

        <inertial>
            <mass value = "2.5"/>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <inertia ixx = "0.009505" ixy = "0" ixz = "0" iyy = "0.019089" iyz = "0" izz = "0.023083"/>
        </inertial>

        <visual>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <box size = "${base_length} ${base_width} ${base_height}"/>
            </geometry>
            <material name = "orange">
                <color rgba = "1 0.5 0 1"/>
            </material>
        </visual>

        <collision>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <box size = "${base_length} ${base_width} ${base_height}"/>
            </geometry>
        </collision>

    </link>

    <joint name = "base_joint" type = "fixed">

        <parent link = "base_footprint"/>
        <child link = "base_link"/>
        <origin rpy = "0 0 0" xyz = "0 0 0.0675"/>

    </joint>

    <link name = "right_wheel_link">

        <inertial>
            <mass value = "0.05"/>
            <origin rpy = "1.57 0 0" xyz = "0 0 0"/>
            <inertia ixx = "0.000029" ixy = "0" ixz = "0" iyy = "0.000029" iyz = "0" izz = "0.000048"/>
        </inertial>

        <visual>
            <origin rpy = "1.57 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${wheel_radius}" length = "${wheel_length}"/>
            </geometry>
            <material name = "black">
                <color rgba = "0 0 0 1"/>
            </material>
        </visual>

        <collision>
            <origin rpy = "1.57 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${wheel_radius}" length = "${wheel_length}"/>
            </geometry>
        </collision>

    </link>

    <joint name = "right_wheel_joint" type = "continuous">

        <parent link = "base_link"/>
        <child link = "right_wheel_link"/>
        <axis xyz = "0 1 0"/>
        <origin rpy = "0 0 0" xyz = "0.08 -0.1075 -0.0235"/>

    </joint>

    <link name = "left_wheel_link">

        <inertial>
            <mass value = "0.05"/>
            <origin rpy = "-1.57 0 0" xyz = "0 0 0"/>
            <inertia ixx = "0.000029" ixy = "0" ixz = "0" iyy = "0.000029" iyz = "0" izz = "0.000048"/>
        </inertial>

        <visual>
            <origin rpy = "-1.57 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${wheel_radius}" length = "${wheel_length}"/>
            </geometry>
            <material name = "black">
                <color rgba = "0 0 0 1"/>
            </material>
        </visual>

        <collision>
            <origin rpy = "-1.57 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${wheel_radius}" length = "${wheel_length}"/>
            </geometry>
        </collision>

    </link>

    <joint name = "left_wheel_joint" type = "continuous">

        <parent link = "base_link"/>
        <child link = "left_wheel_link"/>
        <axis xyz = "0 1 0"/>
        <origin rpy = "0 0 0" xyz = "0.08 0.1075 -0.0235"/>

    </joint>

    <link name = "castor_link">

        <inertial>
            <mass value = "0.02"/>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <inertia ixx = "0.0000008" ixy = "0" ixz = "0" iyy = "0.0000008" iyz = "0" izz = "0.0000008"/>
        </inertial>

        <visual>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <sphere radius = "0.01"/>
            </geometry>
            <material name = "black">
                <color rgba = "0 0 0 1"/>
            </material>
        </visual>

        <collision>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <sphere radius = "0.01"/>
            </geometry>
        </collision>

    </link>

    <joint name = "castor_joint" type = "fixed">

        <parent link = "base_link"/>
        <child link = "castor_link"/>
        <origin rpy = "0 0 0" xyz = "-0.09 0 -0.0575"/>

    </joint>

    <link name = "laser_link">
        
        <inertial>
            <mass value = "0.110"/>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <inertia ixx = "0.000037354167" ixy = "0" ixz = "0" iyy = "0.000037354167" iyz = "0" izz = "0.00004159375"/>
        </inertial>

        <visual>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${laser_radius}" length = "${laser_length}"/>
            </geometry>
            <material name = "black">
                <color rgba = "0 0 0 1"/>
            </material>
        </visual>

        <collision>
            <origin rpy = "0 0 0" xyz = "0 0 0"/>
            <geometry>
                <cylinder radius = "${laser_radius}" length = "${laser_length}"/>
            </geometry>
        </collision>

    </link>

    <joint name = "laser_joint" type = "fixed">

        <origin xyz = "0.085 0 0.07875" rpy = "0 0 0"/>
        <parent link = "base_link"/>
        <child link = "laser_link"/>

    </joint>

</robot>